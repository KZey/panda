<script type="text/javascript">
	var swfu;

	window.onload = function () {
		swfu = new SWFUpload({
			// Backend settings
			upload_url: "http://localhost:5678/videos.json",
			file_post_name: "file",
			post_params : {
			  <%= @params_to_post.map {|k,v| "'#{k}' : '#{v}'"}.join(', ') %>
			},

			// Flash file settings
			file_size_limit : "100 MB",
			file_types : "*.*",			// or you could use something like: "*.doc;*.wpd;*.pdf",
			file_types_description : "All Files",
			file_upload_limit : "0",
			file_queue_limit : "1",

			// Event handler settings
			swfupload_loaded_handler : swfUploadLoaded,

			file_dialog_start_handler: fileDialogStart,
			file_queued_handler : fileQueued,
			file_queue_error_handler : fileQueueError,
			file_dialog_complete_handler : fileDialogComplete,

			//upload_start_handler : uploadStart,	// I could do some client/JavaScript validation here, but I don't need to.
			upload_progress_handler : uploadProgress,
			upload_error_handler : uploadError,
			upload_success_handler : uploadSuccess,
			upload_complete_handler : uploadComplete,

			// Button Settings
			button_image_url : "XPButtonUploadText_61x22.png",
			button_placeholder_id : "spanButtonPlaceholder",
			button_width: 61,
			button_height: 22,

			// Flash Settings
			flash_url : "/swfupload.swf",

			custom_settings : {
				progress_target : "fsUploadProgress",
				upload_successful : false
			},

			// Debug settings
			debug: false
		});

	};
</script>

<h2>Upload Video</h2>
<form id="form1" action="/done" enctype="multipart/form-data" method="post">
	<label for="title">Last Name:</label>
	<input name="title" id="title" type="text" />
	
	
		<input type="text" id="txtFileName" disabled="true" style="border: solid 1px; background-color: #FFFFFF;" />
		<span id="spanButtonPlaceholder"></span>
	<div class="flash" id="fsUploadProgress"></div>
	<input type="hidden" name="video" id="video" value="" />
	
	<input type="submit" value="Submit Application" id="btnSubmit" />
</form>